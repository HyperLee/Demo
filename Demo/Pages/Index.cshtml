@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<!-- 時鐘元件區塊 -->
<div class="clock-container">
    <!-- 切換按鈕已移除，兩種時鐘同時顯示 -->
    <!-- 電子時鐘樣式 -->
    <div id="digitalClock" class="digital-clock">
        <span id="digitalHour">00</span><span id="digitalColon1" class="mx-1">:</span><span id="digitalMinute">00</span><span id="digitalColon2" class="mx-1">:</span><span id="digitalSecond">00</span>
    </div>
    <!-- 指針時鐘樣式 -->
    <div id="analogClock" style="margin-top:2rem;">
        <div class="analog-clock-face">
            <!-- 外框裝飾 -->
            <div class="clock-outer-ring"></div>
            <div class="clock-inner-ring"></div>
            <!-- 時針數字 -->
            <div class="clock-numbers">
                <div class="number twelve">12</div>
                <div class="number three">3</div>
                <div class="number six">6</div>
                <div class="number nine">9</div>
            </div>
            <!-- 刻度 -->
            <div id="clockTicks"></div>
            <!-- 指針 -->
            <div id="hourHand" class="analog-hour-hand"></div>
            <div id="minuteHand" class="analog-minute-hand"></div>
            <div id="secondHand" class="analog-second-hand"></div>
            <!-- 中心圓點 -->
            <div class="analog-center-dot"></div>
            <!-- 光暈效果 -->
            <div class="clock-glow"></div>
        </div>
    </div>
</div>

<style>
.clock-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-top: 2.5rem;
}
.digital-clock {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
    background: #18181b;
    color: #22d3ee;
    border-radius: 0.75rem;
    padding: 1.5rem 3rem;
    box-shadow: 0 4px 24px 0 #0001;
    user-select: none;
    letter-spacing: 0.1em;
    margin-bottom: 2rem;
}
.digital-clock span {
    margin: 0 0.2em;
}
.analog-clock-face {
    position: relative;
    width: 20rem;
    height: 20rem;
    background: linear-gradient(145deg, #f8fafc, #e2e8f0);
    border-radius: 50%;
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.15),
        inset 0 -8px 16px rgba(0, 0, 0, 0.1),
        inset 0 8px 16px rgba(255, 255, 255, 0.8);
    border: 8px solid transparent;
    background-clip: padding-box;
    margin: 0 auto;
    overflow: hidden;
}

/* 外框裝飾環 */
.clock-outer-ring {
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
    background: linear-gradient(45deg, #ffd700, #ffed4e, #fbbf24, #f59e0b);
    border-radius: 50%;
    z-index: -1;
    animation: rotate 20s linear infinite;
}

.clock-inner-ring {
    position: absolute;
    top: 12px;
    left: 12px;
    right: 12px;
    bottom: 12px;
    border: 3px solid rgba(255, 215, 0, 0.3);
    border-radius: 50%;
    box-shadow: 
        0 0 20px rgba(255, 215, 0, 0.4),
        inset 0 0 20px rgba(255, 215, 0, 0.2);
}

/* 光暈效果 */
.clock-glow {
    position: absolute;
    top: -30px;
    left: -30px;
    right: -30px;
    bottom: -30px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.2) 0%, transparent 70%);
    z-index: -2;
    animation: glow 3s ease-in-out infinite alternate;
}

/* 數字樣式 */
.clock-numbers {
    position: absolute;
    width: 100%;
    height: 100%;
}

.number {
    position: absolute;
    font-size: 2rem;
    font-weight: bold;
    background: linear-gradient(45deg, #1e293b, #475569);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    font-family: 'Georgia', serif;
}

.twelve {
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
}

.three {
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
}

.six {
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
}

.nine {
    top: 50%;
    left: 10px;
    transform: translateY(-50%);
}
.analog-hour-hand {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 10px;
    height: 70px;
    margin-left: -5px;
    margin-top: -70px;
    background: linear-gradient(180deg, #1e293b 0%, #475569 50%, #64748b 100%);
    border-radius: 5px 5px 0 0;
    transform-origin: bottom;
    z-index: 5;
    box-shadow: 
        0 0 10px rgba(0, 0, 0, 0.3),
        inset 0 -2px 4px rgba(255, 255, 255, 0.3),
        inset 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: all 0.5s ease;
}

.analog-hour-hand::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 15px solid #ffd700;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.analog-minute-hand {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 8px;
    height: 100px;
    margin-left: -4px;
    margin-top: -100px;
    background: linear-gradient(180deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
    border-radius: 4px 4px 0 0;
    transform-origin: bottom;
    z-index: 6;
    box-shadow: 
        0 0 12px rgba(59, 130, 246, 0.4),
        inset 0 -2px 4px rgba(255, 255, 255, 0.3),
        inset 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: all 0.5s ease;
}

.analog-minute-hand::before {
    content: '';
    position: absolute;
    top: -4px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-bottom: 12px solid #60a5fa;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.analog-second-hand {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 3px;
    height: 120px;
    margin-left: -1.5px;
    margin-top: -120px;
    background: linear-gradient(180deg, #dc2626 0%, #ef4444 50%, #f87171 100%);
    border-radius: 2px 2px 0 0;
    transform-origin: bottom;
    z-index: 7;
    box-shadow: 
        0 0 15px rgba(239, 68, 68, 0.6),
        0 0 30px rgba(239, 68, 68, 0.3);
    animation: secondHandGlow 1s ease-in-out infinite alternate;
}

.analog-second-hand::before {
    content: '';
    position: absolute;
    top: -3px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 3px solid transparent;
    border-right: 3px solid transparent;
    border-bottom: 10px solid #dc2626;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.analog-center-dot {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 24px;
    height: 24px;
    margin-left: -12px;
    margin-top: -12px;
    background: radial-gradient(circle, #ffd700 30%, #f59e0b 70%, #d97706 100%);
    border-radius: 50%;
    z-index: 10;
    box-shadow: 
        0 0 20px rgba(255, 215, 0, 0.6),
        inset 0 -3px 6px rgba(0, 0, 0, 0.2),
        inset 0 3px 6px rgba(255, 255, 255, 0.5);
    border: 3px solid #fff;
}

/* 動畫效果 */
@@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@@keyframes glow {
    from { 
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
    }
    to { 
        box-shadow: 0 0 40px rgba(255, 215, 0, 0.4);
    }
}

@@keyframes secondHandGlow {
    from { 
        box-shadow: 
            0 0 15px rgba(239, 68, 68, 0.6),
            0 0 30px rgba(239, 68, 68, 0.3);
    }
    to { 
        box-shadow: 
            0 0 25px rgba(239, 68, 68, 0.8),
            0 0 50px rgba(239, 68, 68, 0.5);
    }
}
</style>
<!-- 時鐘元件腳本 -->
<script>
// 取得 UTC+8 時間
function getTaipeiTime() {
    const now = new Date();
    // 取得 UTC 時間 (毫秒)
    const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
    // 加上 8 小時 (28800000 毫秒)
    return new Date(utc + 8 * 60 * 60 * 1000);
}

// 電子時鐘更新
function updateDigitalClock() {
    const t = getTaipeiTime();
    document.getElementById('digitalHour').textContent = t.getHours().toString().padStart(2, '0');
    document.getElementById('digitalMinute').textContent = t.getMinutes().toString().padStart(2, '0');
    document.getElementById('digitalSecond').textContent = t.getSeconds().toString().padStart(2, '0');
    // 閃爍效果
    const showColon = t.getSeconds() % 2 === 0;
    document.getElementById('digitalColon1').style.opacity = showColon ? 1 : 0.3;
    document.getElementById('digitalColon2').style.opacity = showColon ? 1 : 0.3;
}

// 指針時鐘更新
function updateAnalogClock() {
    const t = getTaipeiTime();
    const hour = t.getHours() % 12;
    const minute = t.getMinutes();
    const second = t.getSeconds();
    // 角度計算
    const hourDeg = (hour + minute / 60) * 30;
    const minuteDeg = (minute + second / 60) * 6;
    const secondDeg = second * 6;
    // 防呆檢查
    const hourHand = document.getElementById('hourHand');
    const minuteHand = document.getElementById('minuteHand');
    const secondHand = document.getElementById('secondHand');
    if (hourHand && minuteHand && secondHand) {
        hourHand.style.transform = `rotate(${hourDeg}deg)`;
        minuteHand.style.transform = `rotate(${minuteDeg}deg)`;
        secondHand.style.transform = `rotate(${secondDeg}deg)`;
    } else {
        // 若元素不存在，顯示錯誤於 console
        console.error('指針元素不存在，analogClock 未正確渲染');
    }
}

// 指針時鐘刻度產生
function renderClockTicks() {
    const ticks = [];
    for (let i = 0; i < 60; i++) {
        const isHour = i % 5 === 0;
        const isQuarterHour = i % 15 === 0;
        
        if (isHour) {
            // 主要時間刻度 (金色漸層)
            const length = isQuarterHour ? 28 : 20;
            const width = isQuarterHour ? 5 : 4;
            const deg = i * 6;
            
            ticks.push(`
                <div style="
                    position: absolute;
                    left: 50%;
                    top: 50%;
                    width: ${width}px;
                    height: ${length}px;
                    background: linear-gradient(180deg, #ffd700 0%, #f59e0b 50%, #d97706 100%);
                    transform: rotate(${deg}deg) translate(-50%, -100%);
                    border-radius: 3px;
                    box-shadow: 
                        0 0 8px rgba(255, 215, 0, 0.4),
                        inset 0 -2px 4px rgba(0, 0, 0, 0.2),
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
                    transform-origin: 50% 100%;
                "></div>
            `);
        } else {
            // 分鐘刻度 (銀色漸層)
            const deg = i * 6;
            ticks.push(`
                <div style="
                    position: absolute;
                    left: 50%;
                    top: 50%;
                    width: 2px;
                    height: 12px;
                    background: linear-gradient(180deg, #e5e7eb 0%, #9ca3af 100%);
                    transform: rotate(${deg}deg) translate(-50%, -100%);
                    border-radius: 1px;
                    box-shadow: inset 0 -1px 2px rgba(0, 0, 0, 0.1);
                    transform-origin: 50% 100%;
                "></div>
            `);
        }
    }
    document.getElementById('clockTicks').innerHTML = ticks.join('');
}

// 初始化：兩種時鐘同時顯示
document.addEventListener('DOMContentLoaded', function() {
    renderClockTicks();
    updateDigitalClock();
    updateAnalogClock();
    setInterval(() => {
        updateDigitalClock();
        updateAnalogClock();
    }, 1000);
});
</script>
