# 多時區電子鐘顯示頁面 - 燈箱功能開發規格書

## 專案概述
此專案為多時區電子時鐘頁面的燈箱功能增強，目標是為現有的時區時鐘提供詳細資訊展示功能。

## 檔案位置
- **前端頁面**: `#file:index2.cshtml`
- **後端 Model**: `#file:index2.cshtml.cs`
- **樣式檔案**: `~/css/clock.css`
- **JavaScript**: 需新增燈箱互動邏輯

## 需求分析

### 主要功能需求
1. **燈箱觸發機制**
   - 點擊任一下方小時鐘觸發燈箱彈出
   - 支援鍵盤 ESC 鍵關閉燈箱
   - 點擊燈箱外部區域關閉燈箱

2. **燈箱內容顯示**
   - 時區完整名稱（如：美國/紐約、歐洲/倫敦）
   - 城市中文名稱
   - 詳細時間格式：`yyyy/MM/dd HH:mm:ss`
   - 與本地時間時差顯示（如：+8、-5）
   - 即時更新時間（每秒更新）

3. **用戶互動**
   - 關閉按鈕（右上角 X 按鈕）
   - 燈箱外部點擊關閉
   - ESC 鍵盤快捷鍵關閉

### 技術需求

#### 前端實作
- **HTML 結構**
  - 燈箱遮罩層 (`modal-overlay`)
  - 燈箱內容容器 (`modal-content`)
  - 關閉按鈕 (`modal-close`)
  - 時間資訊顯示區域

- **CSS 樣式**
  - 燈箱遮罩背景（半透明黑色）
  - 燈箱居中顯示
  - 響應式設計（手機、平板、桌面）
  - 動畫效果（淡入淡出）
  - 關閉按鈕樣式

- **JavaScript 邏輯**
  - 事件監聽器綁定
  - 燈箱開關狀態管理
  - 時區資料提取與顯示
  - 時間格式化函式
  - 即時更新機制

#### 支援的時區
根據現有實作，需支援以下時區：
- **紐約** (America/New_York)
- **倫敦** (Europe/London) 
- **東京** (Asia/Tokyo)
- **沙烏地阿拉伯** (Asia/Riyadh)

### 用戶體驗要求

#### 視覺設計
- 燈箱大小適中，不遮蔽過多背景內容
- 文字清晰易讀，字體大小適當
- 配色與主頁面風格一致
- 適當的陰影效果增強層次感

#### 互動體驗
- 點擊回應迅速（< 100ms）
- 動畫流暢自然（300ms 動畫時間）
- 多種關閉方式提供便利性
- 無障礙設計（ARIA 標籤支援）

#### 效能要求
- 燈箱開啟/關閉動畫流暢
- 時間更新不影響主頁面效能
- 記憶體使用合理，避免洩漏

### 技術實作細節

#### 資料結構
```javascript
const timezoneData = {
  'America/New_York': {
    displayName: '美國/紐約',
    cityName: '紐約',
    elementId: 'ny'
  },
  // ... 其他時區
}
```

#### 時間格式化
- 使用 `Intl.DateTimeFormat` API
- 格式：`yyyy/MM/dd HH:mm:ss`
- 時差計算與顯示

#### 事件處理
- 委派事件監聽（Event Delegation）
- 防止事件冒泡
- 鍵盤事件處理

### 測試需求

#### 功能測試
- [ ] 點擊各時區時鐘正常彈出燈箱
- [ ] 燈箱內容正確顯示對應時區資訊
- [ ] 各種關閉方式正常運作
- [ ] 時間即時更新功能正常

#### 瀏覽器相容性
- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

#### 響應式測試
- [ ] 桌面版 (1920x1080)
- [ ] 平板版 (768x1024)
- [ ] 手機版 (375x667)

### 開發優先級
1. **P0 (高優先級)**：基本燈箱彈出與關閉功能
2. **P1 (中優先級)**：時間格式化與即時更新
3. **P2 (低優先級)**：動畫效果與樣式優化

### 後續擴充可能
- 支援更多時區
- 自訂時區選擇功能
- 時間格式偏好設定
- 深色模式支援

## 驗收標準
- 所有時區時鐘可正常觸發燈箱
- 燈箱內容準確顯示時區詳細資訊
- 時間格式符合 `yyyy/MM/dd HH:mm:ss` 規範
- 多種關閉方式均可正常運作
- 在主流瀏覽器中表現一致
- 響應式設計在各種設備上正常顯示

